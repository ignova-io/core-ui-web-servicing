"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[4841],{14620:(e,n,t)=>{t.d(n,{F:()=>b,Z:()=>l});var s=t(65043),a=t(73705);function l(e,n){const[t,l]=(0,s.useState)(!1),[o,r]=(0,s.useState)(n),[i,d]=(0,s.useState)(e),c=(0,a.xO)(i,o),u=(0,s.useCallback)((()=>{l(!0)}),[]),x=(0,s.useCallback)((()=>{l(!1)}),[]);return{startDate:i,endDate:o,onChangeStartDate:(0,s.useCallback)((e=>{d(e)}),[]),onChangeEndDate:(0,s.useCallback)((e=>{c&&r(null),r(e)}),[c]),open:t,onOpen:u,onClose:x,onReset:(0,s.useCallback)((()=>{d(null),r(null)}),[]),error:c,selected:!!i&&!!o,label:(0,a.if)(i,o,!0),shortLabel:(0,a.if)(i,o),setStartDate:d,setEndDate:r}}var o=t(7353),r=t(72882),i=t(83462),d=t(26240),c=t(26600),u=t(92064),x=t(35316),p=t(85442),h=t(66124),m=t(81558),v=t(15461),g=t(70579);function b(e){var n;let{open:t,error:a,onClose:l,onSubmit:b,startDate:f,endDate:y,onChangeStartDate:j,onChangeEndDate:k,PaperProps:A,variant:C="input",title:w="Select date range",...D}=e;const S=(0,d.A)(),I=(0,p.A)(S.breakpoints.up("md")),W="calendar"===C,T=(0,s.useCallback)((()=>{l(),null===b||void 0===b||b()}),[l,b]),R={py:1,gap:3,display:"flex",flexDirection:"column",justifyContent:"center",...W&&I&&{flexDirection:"row"}},P={borderRadius:2,border:`dashed 1px ${S.vars.palette.divider}`};return(0,g.jsxs)(i.A,{fullWidth:!0,open:t,onClose:l,maxWidth:!W&&"xs",PaperProps:{...A,sx:[{...W&&{maxWidth:720}},...Array.isArray(null===A||void 0===A?void 0:A.sx)?null!==(n=null===A||void 0===A?void 0:A.sx)&&void 0!==n?n:[]:[null===A||void 0===A?void 0:A.sx]]},...D,children:[(0,g.jsx)(c.A,{sx:{pb:2},children:w}),(0,g.jsxs)(x.A,{sx:{...W&&I&&{overflow:"unset"}},children:[(0,g.jsx)(o.A,{sx:R,children:W?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.A,{sx:P,children:(0,g.jsx)(v.x,{value:f,onChange:j})}),(0,g.jsx)(o.A,{sx:P,children:(0,g.jsx)(v.x,{value:y,onChange:k})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.l,{label:"Start date",value:f,onChange:j}),(0,g.jsx)(m.l,{label:"End date",value:y,onChange:k})]})}),a&&(0,g.jsx)(h.A,{error:!0,sx:{px:2},children:"End date must be later than start date"})]}),(0,g.jsxs)(u.A,{children:[(0,g.jsx)(r.A,{variant:"outlined",color:"inherit",onClick:l,children:"Cancel"}),(0,g.jsx)(r.A,{disabled:a,variant:"contained",onClick:T,children:"Apply"})]})]})}},70074:(e,n,t)=>{t.d(n,{T:()=>d});var s=t(72882),a=t(83462),l=t(26600),o=t(92064),r=t(35316),i=t(70579);function d(e){let{open:n,title:t,action:d,content:c,onClose:u,...x}=e;return(0,i.jsxs)(a.A,{fullWidth:!0,maxWidth:"xs",open:n,onClose:u,...x,children:[(0,i.jsx)(l.A,{sx:{pb:2},children:t}),c&&(0,i.jsxs)(r.A,{sx:{typography:"body2"},children:[" ",c," "]}),(0,i.jsxs)(o.A,{children:[d,(0,i.jsx)(s.A,{variant:"outlined",color:"inherit",onClick:u,children:"Cancel"})]})]})}},95368:(e,n,t)=>{t.d(n,{H:()=>d});var s=t(63789),a=t(7353),l=t(34535),o=t(94496),r=t(57058),i=t(70579);function d(e){var n,t,s,l,d,u,x,p,h,m,v,g;let{sx:b,imgUrl:f,action:y,filled:j,slotProps:k,description:A,title:C="No data",...w}=e;return(0,i.jsxs)(c,{filled:j,sx:b,...w,children:[(0,i.jsx)(a.A,{component:"img",alt:"Empty content",src:null!==f&&void 0!==f?f:`${r.P.assetsDir}/assets/icons/empty/ic-content.svg`,...null===k||void 0===k?void 0:k.img,sx:[{width:1,maxWidth:160},...Array.isArray(null===k||void 0===k||null===(n=k.img)||void 0===n?void 0:n.sx)?null!==(t=null===k||void 0===k||null===(s=k.img)||void 0===s?void 0:s.sx)&&void 0!==t?t:[]:[null===k||void 0===k||null===(l=k.img)||void 0===l?void 0:l.sx]]}),C&&(0,i.jsx)(o.A,{variant:"h6",...null===k||void 0===k?void 0:k.title,sx:[{mt:1,textAlign:"center",color:"text.disabled"},...Array.isArray(null===k||void 0===k||null===(d=k.title)||void 0===d?void 0:d.sx)?null!==(u=null===k||void 0===k||null===(x=k.title)||void 0===x?void 0:x.sx)&&void 0!==u?u:[]:[null===k||void 0===k||null===(p=k.title)||void 0===p?void 0:p.sx]],children:C}),A&&(0,i.jsx)(o.A,{variant:"body2",...null===k||void 0===k?void 0:k.description,sx:[{mt:1,textAlign:"center",color:"text.disabled"},...Array.isArray(null===k||void 0===k||null===(h=k.description)||void 0===h?void 0:h.sx)?null!==(m=null===k||void 0===k||null===(v=k.description)||void 0===v?void 0:v.sx)&&void 0!==m?m:[]:[null===k||void 0===k||null===(g=k.description)||void 0===g?void 0:g.sx]],children:A}),y&&y]})}const c=(0,l.Ay)("div",{shouldForwardProp:e=>!["filled","sx"].includes(e)})((e=>{let{filled:n,theme:t}=e;return{flexGrow:1,height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:t.spacing(0,3),...n&&{borderRadius:2*t.shape.borderRadius,backgroundColor:(0,s.IG)(t.vars.palette.grey["500Channel"],.04),border:`dashed 1px ${(0,s.IG)(t.vars.palette.grey["500Channel"],.08)}`}}}))},57653:(e,n,t)=>{t.d(n,{Y:()=>v,x:()=>f});var s=t(63789),a=t(91706),l=t(7353),o=t(35151),r=t(80033),i=t(42993),d=t(14829),c=t(49502),u=t(57483),x=t(60519);function p(e){let{disableZoom:n,disableVideo:t,disableCaptions:s,disableSlideshow:a,disableThumbnails:l,disableFullscreen:o}=e,p=[d.A,u.A,c.A,x.A,i.A,r.A];return l&&(p=p.filter((e=>e!==x.A))),s&&(p=p.filter((e=>e!==d.A))),o&&(p=p.filter((e=>e!==u.A))),a&&(p=p.filter((e=>e!==c.A))),n&&(p=p.filter((e=>e!==r.A))),t&&(p=p.filter((e=>e!==i.A))),p}const h={root:(0,t(7445).L)("lightbox__root")};var m=t(70579);function v(e){let{slides:n,disableZoom:t,disableVideo:l,disableTotal:r,disableCaptions:i,disableSlideshow:d,disableThumbnails:c,disableFullscreen:u,onGetCurrentIndex:x,className:v,...b}=e;const f=n?n.length:0;return(0,m.jsx)(a.Ay,{slides:n,animation:{swipe:240},carousel:{finite:f<5},controller:{closeOnBackdropClick:!0},plugins:p({disableZoom:t,disableVideo:l,disableCaptions:i,disableSlideshow:d,disableThumbnails:c,disableFullscreen:u}),on:{view:e=>{let{index:n}=e;x&&x(n)}},toolbar:{buttons:[(0,m.jsx)(g,{totalItems:f,disableTotal:r},0),"close"]},render:{iconClose:()=>(0,m.jsx)(o.W,{width:24,icon:"carbon:close"}),iconZoomIn:()=>(0,m.jsx)(o.W,{width:24,icon:"carbon:zoom-in"}),iconZoomOut:()=>(0,m.jsx)(o.W,{width:24,icon:"carbon:zoom-out"}),iconSlideshowPlay:()=>(0,m.jsx)(o.W,{width:24,icon:"carbon:play"}),iconSlideshowPause:()=>(0,m.jsx)(o.W,{width:24,icon:"carbon:pause"}),iconPrev:()=>(0,m.jsx)(o.W,{width:32,icon:"carbon:chevron-left"}),iconNext:()=>(0,m.jsx)(o.W,{width:32,icon:"carbon:chevron-right"}),iconExitFullscreen:()=>(0,m.jsx)(o.W,{width:24,icon:"carbon:center-to-fit"}),iconEnterFullscreen:()=>(0,m.jsx)(o.W,{width:24,icon:"carbon:fit-to-screen"})},className:(0,s.zP)([h.root,v]),...b})}function g(e){let{totalItems:n,disableTotal:t}=e;const{currentIndex:s}=(0,a.mp)();return t?null:(0,m.jsxs)(l.A,{component:"span",className:"yarl__button",sx:{typography:"body2",alignItems:"center",display:"inline-flex",justifyContent:"center"},children:[(0,m.jsxs)("strong",{children:[" ",s+1," "]})," / ",n]})}var b=t(65043);function f(e){const[n,t]=(0,b.useState)(-1);return{selected:n,open:n>=0,onOpen:(0,b.useCallback)((n=>{const s=e.findIndex((e=>"video"===e.type?e.poster===n:e.src===n));t(s)}),[e]),onClose:(0,b.useCallback)((()=>{t(-1)}),[]),setSelected:t}}},54841:(e,n,t)=>{t.r(n),t.d(n,{default:()=>on});var s=t(49367),a=t(57058),l=t(65043),o=t(1648),r=t(23585),i=t(7353),d=t(88911),c=t(19042),u=t(94496),x=t(99784),p=t(91777),h=t(27341),m=t(73715),v=t(54903);const g=!1,b=v.vZ.kanban,f={revalidateIfStale:g,revalidateOnFocus:g,revalidateOnReconnect:g};async function y(e){if((0,l.startTransition)((()=>{(0,m.k)(b,(n=>{const{board:t}=n,s=e;return{...n,board:{...t,tasks:s}}}),!1)})),g){const n={updateTasks:e};await v.Ay.post(b,n,{params:{endpoint:"move-task"}})}}var j=t(95368),k=t(7445);const A={item:(0,k.L)("kanban__item"),column:(0,k.L)("kanban__column"),itemWrap:(0,k.L)("kanban__item__wrap"),columnList:(0,k.L)("kanban__column_list"),state:{fadeIn:"--fade-in",sorting:"--sorting",dragging:"--dragging",disabled:"--disabled",dragOverlay:"--drag-overlay",overContainer:"--over-container"}},C=[r.vL.Down,r.vL.Right,r.vL.Up,r.vL.Left],w=(e,n)=>{let{context:{active:t,droppableRects:s,droppableContainers:a,collisionRect:l}}=n;if(C.includes(e.code)){if(e.preventDefault(),!t||!l)return;const n=[];a.getEnabled().forEach((a=>{if(!a||null!==a&&void 0!==a&&a.disabled)return;const o=s.get(a.id);if(!o)return;const i=a.data.current;if(i){const{type:e,children:n}=i;var d;if("container"===e&&(null===n||void 0===n?void 0:n.length)>0)if("container"!==(null===(d=t.data.current)||void 0===d?void 0:d.type))return}switch(e.code){case r.vL.Down:l.top<o.top&&n.push(a);break;case r.vL.Up:l.top>o.top&&n.push(a);break;case r.vL.Left:l.left>=o.left+o.width&&n.push(a);break;case r.vL.Right:l.left+l.width<=o.left&&n.push(a)}}));const i=(0,r.y$)({active:t,collisionRect:l,droppableRects:s,droppableContainers:n,pointerCoordinates:null}),d=(0,r.Vy)(i,"id");if(null!=d){const e=a.get(d),n=null===e||void 0===e?void 0:e.node.current,t=null===e||void 0===e?void 0:e.rect.current;var o;if(n&&t)return"placeholder"===e.id?{x:t.left+(t.width-l.width)/2,y:t.top+(t.height-l.height)/2}:"container"===(null===(o=e.data.current)||void 0===o?void 0:o.type)?{x:t.left+20,y:t.top+74}:{x:t.left,y:t.top}}}};var D=t(41024),S=t(81772),I=t(32539),W=t(63789),T=t(34535),R=t(70579);const P=(0,l.forwardRef)(((e,n)=>{const{slots:t,stateProps:s,sx:a,...l}=e;return(0,R.jsxs)(O,{ref:n,className:(0,W.zP)([A.column],{[A.state.dragging]:null===s||void 0===s?void 0:s.dragging,[A.state.dragOverlay]:null===s||void 0===s?void 0:s.dragOverlay,[A.state.overContainer]:null===s||void 0===s?void 0:s.overContainer}),sx:a,...l,children:[(null===t||void 0===t?void 0:t.header)&&t.header,(null===t||void 0===t?void 0:t.action)&&(null===t||void 0===t?void 0:t.action),(null===t||void 0===t?void 0:t.main)&&(0,R.jsx)(E,{className:A.columnList,children:t.main})]})})),F=(0,l.memo)(P),O=(0,T.Ay)("div")((e=>{let{theme:n}=e;const t={default:{top:0,left:0,content:'""',width:"100%",height:"100%",position:"absolute",borderRadius:"inherit",backgroundColor:"transparent",transition:n.transitions.create(["background-color"])},over:{backgroundColor:(0,W.IG)(n.vars.palette.grey["500Channel"],.08),...n.applyStyles("dark",{backgroundColor:(0,W.IG)(n.vars.palette.grey["500Channel"],.16)})}};return{flexShrink:0,borderWidth:1,height:"100%",display:"flex",position:"relative",borderStyle:"solid",flexDirection:"column",gap:n.spacing(2.5),borderColor:"transparent",width:"var(--column-width)",padding:"var(--column-padding)",borderRadius:"var(--column-radius)",backgroundColor:n.vars.palette.background.neutral,...n.applyStyles("dark",{backgroundColor:n.vars.palette.grey[800]}),"&::before":t.default,[`&.${A.state.overContainer}`]:{"&::before":t.over},[`&.${A.state.dragOverlay}`]:{backdropFilter:"blur(6px)",borderColor:(0,W.IG)(n.vars.palette.grey["500Channel"],.08),backgroundColor:(0,W.IG)(n.vars.palette.background.neutralChannel,.48),...n.applyStyles("dark",{backgroundColor:(0,W.IG)(n.vars.palette.grey["800Channel"],.48)})},[`&.${A.state.dragging}`]:{opacity:0}}})),E=(0,T.Ay)("ul")((()=>({minHeight:80,display:"flex",gap:"var(--item-gap)",flexDirection:"column"})));var $=t(65204),L=t(66124),U=t(20036),G=t(62559),N=t(1470),_=t(73705),z=t(43254);function Z(e){let{status:n,openAddTask:t,onAddTask:s,onCloseAddTask:a}=e;const[o,r]=(0,l.useState)(""),i=(0,l.useMemo)((()=>({id:(0,W.gZ)(),status:n,name:o.trim()?o:"Untitled",priority:"medium",attachments:[],labels:[],comments:[],assignee:[],due:[(0,_.Ec)(),(0,_.YT)({days:1})],reporter:{id:z.EV.id(16),name:z.EV.fullName(16),avatarUrl:z.EV.image.avatar(16)}})),[n,o]),d=(0,l.useCallback)((e=>{r(e.target.value)}),[]),c=(0,l.useCallback)((e=>{"Enter"===e.key&&(s(i),r(""))}),[i,s]),u=(0,l.useCallback)((()=>{r(""),a()}),[a]);return t?(0,R.jsx)(U.x,{onClickAway:u,children:(0,R.jsxs)("div",{children:[(0,R.jsx)($.A,{sx:[e=>({borderRadius:1.5,bgcolor:"background.default",boxShadow:e.vars.customShadows.z1})],children:(0,R.jsx)(G.Ay,{autoFocus:!0,fullWidth:!0,placeholder:"Untitled",value:o,onChange:d,onKeyUp:c,sx:{px:2,height:56,[`& .${N.A.input}`]:{p:0,typography:"subtitle2"}}})}),(0,R.jsx)(L.A,{sx:{mx:1},children:"Press Enter to create the task."})]})}):null}var H=t(72882),V=t(30922),K=t(94814),B=t(71716),M=t(18388),Y=t(35151),q=t(70074),X=t(50031);function J(e){let{sx:n,...t}=e;return(0,R.jsx)(G.Ay,{sx:[e=>({[`&.${N.A.root}`]:{py:.75,borderRadius:1,typography:"h6",borderWidth:2,borderStyle:"solid",borderColor:"transparent",transition:e.transitions.create(["padding-left","border-color"]),[`&.${N.A.focused}`]:{pl:.75,borderColor:"text.primary"}},[`& .${N.A.input}`]:{typography:"h6"}}),...Array.isArray(n)?n:[n]],...t})}function Q(e){let{sx:n,columnName:t,totalTasks:s,handleProps:a,onClearColumn:o,onToggleAddTask:r,onDeleteColumn:d,onUpdateColumn:c}=e;const u=(0,l.useId)(),x=(0,l.useRef)(null),p=(0,S.fP)(),h=(0,S.Cg)(),[m,v]=(0,l.useState)(t);(0,l.useEffect)((()=>{p.open&&x.current&&x.current.focus()}),[p.open]);const g=(0,l.useCallback)((e=>{v(e.target.value)}),[]),b=(0,l.useCallback)((e=>{"Enter"===e.key&&(x.current&&x.current.blur(),null===c||void 0===c||c(m))}),[m,c]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(i.A,{sx:[{display:"flex",alignItems:"center"},...Array.isArray(n)?n:[n]],children:[(0,R.jsx)(M.JU,{sx:[e=>({borderRadius:"50%",borderColor:(0,W.IG)(e.vars.palette.grey["500Channel"],.24)})],children:s}),(0,R.jsx)(J,{inputRef:x,placeholder:"Column name",value:m,onChange:g,onKeyUp:b,inputProps:{id:`${t}-${u}-column-input`},sx:{mx:1}}),(0,R.jsx)(B.A,{size:"small",color:"inherit",onClick:r,children:(0,R.jsx)(Y.W,{icon:"solar:add-circle-bold"})}),(0,R.jsx)(B.A,{size:"small",color:p.open?"inherit":"default",onClick:p.onOpen,children:(0,R.jsx)(Y.W,{icon:"solar:menu-dots-bold-duotone"})}),(0,R.jsx)(B.A,{size:"small",...a,children:(0,R.jsx)(Y.W,{icon:"nimbus:drag-dots"})})]}),(0,R.jsx)(X.t,{open:p.open,anchorEl:p.anchorEl,onClose:p.onClose,children:(0,R.jsxs)(V.A,{children:[(0,R.jsxs)(K.A,{onClick:p.onClose,children:[(0,R.jsx)(Y.W,{icon:"solar:pen-bold"}),"Rename"]}),(0,R.jsxs)(K.A,{onClick:()=>{null===o||void 0===o||o(),p.onClose()},children:[(0,R.jsx)(Y.W,{icon:"solar:eraser-bold"}),"Clear"]}),(0,R.jsxs)(K.A,{onClick:()=>{h.onTrue(),p.onClose()},sx:{color:"error.main"},children:[(0,R.jsx)(Y.W,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),(0,R.jsx)(q.T,{open:h.value,onClose:h.onFalse,title:"Delete",content:(0,R.jsxs)(R.Fragment,{children:["Are you sure want to delete column?",(0,R.jsxs)(i.A,{sx:{typography:"caption",color:"error.main",mt:2},children:[(0,R.jsx)("strong",{children:" NOTE: "})," All tasks related to this category will also be deleted."]})]}),action:(0,R.jsx)(H.A,{variant:"contained",color:"error",onClick:()=>{null===d||void 0===d||d(),h.onFalse()},children:"Delete"})})]})}const ee=e=>(0,o.uU)({...e,wasDragging:!0});function ne(e){var n;let{children:t,column:s,tasks:a,disabled:r,sx:i}=e;const d=(0,S.Cg)(),{attributes:c,isDragging:u,listeners:x,setNodeRef:p,transition:h,active:f,over:y,transform:j}=(0,o.gl)({id:s.id,data:{type:"container",children:a},animateLayoutChanges:ee}),k=a.map((e=>e.id)),A=!!y&&(s.id===y.id&&"container"!==(null===f||void 0===f||null===(n=f.data.current)||void 0===n?void 0:n.type)||k.includes(y.id)),C=(0,l.useCallback)((async e=>{try{s.name!==e&&(!async function(e,n){if(g){const t={columnId:e,columnName:n};await v.Ay.post(b,t,{params:{endpoint:"update-column"}})}(0,l.startTransition)((()=>{(0,m.k)(b,(t=>{const{board:s}=t,a=s.columns.map((t=>t.id===e?{...t,name:n}:t));return{...t,board:{...s,columns:a}}}),!1)}))}(s.id,e),I.oR.success("Update success!",{position:"top-center"}))}catch(n){console.error(n)}}),[s.id,s.name]),w=(0,l.useCallback)((async()=>{try{!async function(e){if(g){const n={columnId:e};await v.Ay.post(b,n,{params:{endpoint:"clear-column"}})}(0,l.startTransition)((()=>{(0,m.k)(b,(n=>{const{board:t}=n,s={...t.tasks,[e]:[]};return{...n,board:{...t,tasks:s}}}),!1)}))}(s.id)}catch(e){console.error(e)}}),[s.id]),W=(0,l.useCallback)((async()=>{try{!async function(e){if(g){const n={columnId:e};await v.Ay.post(b,n,{params:{endpoint:"delete-column"}})}(0,m.k)(b,(n=>{const{board:t}=n,s=t.columns.filter((n=>n.id!==e)),a=Object.keys(t.tasks).filter((n=>n!==e)).reduce(((e,n)=>(e[n]=t.tasks[n],e)),{});return{...n,board:{...t,columns:s,tasks:a}}}),!1)}(s.id),I.oR.success("Delete success!",{position:"top-center"})}catch(e){console.error(e)}}),[s.id]),T=(0,l.useCallback)((async e=>{try{!async function(e,n){if(g){const t={columnId:e,taskData:n};await v.Ay.post(b,t,{params:{endpoint:"create-task"}})}(0,l.startTransition)((()=>{(0,m.k)(b,(t=>{const{board:s}=t,a={...s.tasks,[e]:[n,...s.tasks[e]]};return{...t,board:{...s,tasks:a}}}),!1)}))}(s.id,e),d.onFalse()}catch(n){console.error(n)}}),[s.id,d]);return(0,R.jsx)(F,{ref:r?void 0:p,style:{transition:h,transform:D.Ks.Translate.toString(j)},sx:i,stateProps:{dragging:u,overContainer:A,handleProps:{...c,...x}},slots:{header:(0,R.jsx)(Q,{handleProps:{...c,...x},totalTasks:a.length,columnName:s.name,onUpdateColumn:C,onClearColumn:w,onDeleteColumn:W,onToggleAddTask:d.onToggle}),main:t,action:(0,R.jsx)(Z,{status:s.name,openAddTask:d.value,onAddTask:T,onCloseAddTask:d.onFalse})}})}var te=t(60587),se=t(46936),ae=t(86826),le=t(23988);const oe=(0,l.forwardRef)(((e,n)=>{const{task:t,open:s,stateProps:a,sx:o,...r}=e,{fadeIn:d,sorting:c,disabled:u,dragging:x,dragOverlay:p,transition:h,transform:m,listeners:v}=null!==a&&void 0!==a?a:{};(0,l.useEffect)((()=>{if(p)return document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""}}),[p]);return(0,R.jsx)(ie,{ref:n,className:(0,W.zP)([A.itemWrap],{[A.state.fadeIn]:d,[A.state.dragOverlay]:p}),style:{...!!h&&{transition:h},...!!m&&{"--translate-x":`${Math.round(m.x)}px`,"--translate-y":`${Math.round(m.y)}px`,"--scale-x":`${m.scaleX}`,"--scale-y":`${m.scaleY}`}},children:(0,R.jsxs)(de,{className:(0,W.zP)([A.item],{[A.state.sorting]:c,[A.state.dragging]:x,[A.state.disabled]:u,[A.state.dragOverlay]:p}),"data-cypress":"draggable-item",tabIndex:0,sx:o,...v,...r,children:[(()=>{var e,n,a;return!(null===t||void 0===t||null===(e=t.attachments)||void 0===e||!e.length)&&(0,R.jsx)(i.A,{sx:[e=>({p:e.spacing(1,1,0,1)})],children:(0,R.jsx)(ue,{open:s,className:le.K.root,alt:null===t||void 0===t||null===(n=t.attachments)||void 0===n?void 0:n[0],src:null===t||void 0===t||null===(a=t.attachments)||void 0===a?void 0:a[0]})})})(),(0,R.jsxs)(ce,{children:[(0,R.jsx)(Y.W,{icon:("low"===t.priority?"solar:double-alt-arrow-down-bold-duotone":"medium"===t.priority&&"solar:double-alt-arrow-right-bold-duotone")||"solar:double-alt-arrow-up-bold-duotone",sx:{top:4,right:4,position:"absolute",..."low"===t.priority&&{color:"info.main"},..."medium"===t.priority&&{color:"warning.main"},..."hight"===t.priority&&{color:"error.main"}}}),t.name,(()=>{var e,n,s,a,l;return(0,R.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mt:2},children:[(0,R.jsxs)(i.A,{sx:{flexGrow:1,display:"flex",alignItems:"center",typography:"caption",color:"text.disabled"},children:[!(null===t||void 0===t||null===(e=t.comments)||void 0===e||!e.length)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Y.W,{width:16,icon:"solar:chat-round-dots-bold",sx:{mr:.25}}),(0,R.jsx)(i.A,{component:"span",sx:{mr:1},children:null===t||void 0===t||null===(n=t.comments)||void 0===n?void 0:n.length})]}),!(null===t||void 0===t||null===(s=t.attachments)||void 0===s||!s.length)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Y.W,{width:16,icon:"eva:attach-2-fill",sx:{mr:.25}}),(0,R.jsx)(i.A,{component:"span",children:null===t||void 0===t||null===(a=t.attachments)||void 0===a?void 0:a.length})]})]}),(0,R.jsx)(se.A,{sx:{[`& .${ae.A.avatar}`]:{width:24,height:24}},children:null===t||void 0===t||null===(l=t.assignee)||void 0===l?void 0:l.map((e=>(0,R.jsx)(te.A,{alt:e.name,src:e.avatarUrl},e.id)))})]})})()]})]})})})),re=(0,l.memo)(oe),ie=(0,T.Ay)("li")((()=>({"@keyframes fadeIn":{"0%":{opacity:0},"100%":{opacity:1}},display:"flex",transform:"translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1))",transformOrigin:"0 0",touchAction:"manipulation",[`&.${A.state.fadeIn}`]:{animation:"fadeIn 500ms ease"},[`&.${A.state.dragOverlay}`]:{zIndex:999}}))),de=(0,T.Ay)("div")((e=>{let{theme:n}=e;return{width:"100%",cursor:"grab",outline:"none",overflow:"hidden",position:"relative",transformOrigin:"50% 50%",touchAction:"manipulation",borderRadius:"var(--item-radius)",WebkitTapHighlightColor:"transparent",boxShadow:n.vars.customShadows.z1,backgroundColor:n.vars.palette.common.white,transition:n.transitions.create(["box-shadow"]),...n.applyStyles("dark",{backgroundColor:n.vars.palette.grey[900]}),[`&.${A.state.disabled}`]:{},[`&.${A.state.sorting}`]:{},[`&.${A.state.dragOverlay}`]:{backdropFilter:"blur(6px)",boxShadow:n.vars.customShadows.z20,backgroundColor:(0,W.IG)(n.vars.palette.common.whiteChannel,.48),...n.applyStyles("dark",{backgroundColor:(0,W.IG)(n.vars.palette.grey["900Channel"],.48)})},[`&.${A.state.dragging}`]:{opacity:.2,filter:"grayscale(1)"}}})),ce=(0,T.Ay)("div")((e=>{let{theme:n}=e;return{...n.typography.subtitle2,position:"relative",padding:n.spacing(2.5,2)}})),ue=(0,T.Ay)("img",{shouldForwardProp:e=>!["open","sx"].includes(e)})((e=>{let{theme:n}=e;return{width:320,height:"auto",aspectRatio:"4/3",objectFit:"cover",borderRadius:1.5*n.shape.borderRadius,variants:[{props:{open:!0},style:{opacity:.8}}]}}));var xe=t(60446),pe=t.n(xe),he=t(40360),me=t(26487),ve=t(584),ge=t(69392),be=t(1273),fe=t(42788),ye=t(69413),je=t(36930),ke=t(62025),Ae=t(48794),Ce=t(14620),we=t(26240),De=t(85442);function Se(e){let{sx:n,liked:t,taskName:s,onDelete:a,taskStatus:o,onLikeToggle:r,onCloseDetails:d,...c}=e;const u=(0,we.A)(),x=(0,De.A)(u.breakpoints.up("sm")),p=(0,S.fP)(),h=(0,S.Cg)(),[m,v]=(0,l.useState)(o),g=(0,l.useCallback)((e=>{p.onClose(),v(e)}),[p]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(i.A,{sx:[{display:"flex",alignItems:"center",p:u.spacing(2.5,1,2.5,2.5),borderBottom:`solid 1px ${u.vars.palette.divider}`},...Array.isArray(n)?n:[n]],...c,children:[!x&&(0,R.jsx)(ge.A,{title:"Back",children:(0,R.jsx)(B.A,{onClick:d,sx:{mr:1},children:(0,R.jsx)(Y.W,{icon:"eva:arrow-ios-back-fill"})})}),(0,R.jsx)(H.A,{size:"small",variant:"soft",endIcon:(0,R.jsx)(Y.W,{icon:"eva:arrow-ios-downward-fill",width:16,sx:{ml:-.5}}),onClick:p.onOpen,children:m}),(0,R.jsx)(i.A,{component:"span",sx:{flexGrow:1}}),(0,R.jsxs)(i.A,{sx:{display:"flex"},children:[(0,R.jsx)(ge.A,{title:"Like",children:(0,R.jsx)(B.A,{color:t?"default":"primary",onClick:r,children:(0,R.jsx)(Y.W,{icon:"ic:round-thumb-up"})})}),(0,R.jsx)(ge.A,{title:"Delete task",children:(0,R.jsx)(B.A,{onClick:h.onTrue,children:(0,R.jsx)(Y.W,{icon:"solar:trash-bin-trash-bold"})})}),(0,R.jsx)(B.A,{children:(0,R.jsx)(Y.W,{icon:"eva:more-vertical-fill"})})]})]}),(0,R.jsx)(X.t,{open:p.open,anchorEl:p.anchorEl,onClose:p.onClose,slotProps:{arrow:{placement:"top-right"}},children:(0,R.jsx)(V.A,{children:["To do","In progress","Ready to test","Done"].map((e=>(0,R.jsx)(K.A,{selected:m===e,onClick:()=>g(e),children:e},e)))})}),(0,R.jsx)(q.T,{open:h.value,onClose:h.onFalse,title:"Delete",content:(0,R.jsxs)(R.Fragment,{children:["Are you sure want to delete ",(0,R.jsxs)("strong",{children:[" ",s," "]}),"?"]}),action:(0,R.jsx)(H.A,{variant:"contained",color:"error",onClick:a,children:"Delete"})})]})}var Ie=t(47473);function We(e){let{priority:n,onChangePriority:t,sx:s,...a}=e;return(0,R.jsx)(i.A,{sx:[()=>({gap:1,display:"flex",flexWrap:"wrap"}),...Array.isArray(s)?s:[s]],...a,children:["low","medium","hight"].map((e=>(0,R.jsxs)(Ie.A,{onClick:()=>t(e),sx:t=>({py:.5,pl:.75,pr:1.25,fontSize:12,borderRadius:1,lineHeight:"20px",textTransform:"capitalize",fontWeight:"fontWeightBold",boxShadow:`inset 0 0 0 1px ${(0,W.IG)(t.vars.palette.grey["500Channel"],.24)}`,...e===n&&{boxShadow:`inset 0 0 0 2px ${t.vars.palette.text.primary}`}}),children:[(0,R.jsx)(Y.W,{icon:("low"===e?"solar:double-alt-arrow-down-bold-duotone":"medium"===e&&"solar:double-alt-arrow-right-bold-duotone")||"solar:double-alt-arrow-up-bold-duotone",sx:{mr:.5,..."low"===e&&{color:"info.main"},..."medium"===e&&{color:"warning.main"},..."hight"===e&&{color:"error.main"}}}),e]},e)))})}var Te=t(88815);function Re(e){let{attachments:n}=e;const[t,s]=(0,l.useState)(n),a=(0,l.useCallback)((e=>{s([...t,...e])}),[t]),o=(0,l.useCallback)((e=>{const n=t.filter((n=>n!==e));s(n)}),[t]);return(0,R.jsx)(Te.gx,{thumbnail:!0,files:t,onRemove:e=>o(e),slotProps:{thumbnail:{sx:{width:64,height:64}}},lastNode:(0,R.jsx)(Te.Zc,{onDrop:a})})}var Pe=t(57653);function Fe(e){let{comments:n}=e;const t=n.filter((e=>"image"===e.messageType)).map((e=>({src:e.message}))),s=(0,Pe.x)(t);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(d.A,{component:"ul",spacing:3,children:n.map((e=>(0,R.jsxs)(i.A,{component:"li",sx:{gap:2,display:"flex"},children:[(0,R.jsx)(te.A,{src:e.avatarUrl}),(0,R.jsxs)(d.A,{spacing:"image"===e.messageType?1:.5,flexGrow:1,children:[(0,R.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,R.jsxs)(u.A,{variant:"subtitle2",children:[" ",e.name]}),(0,R.jsx)(u.A,{variant:"caption",sx:{color:"text.disabled"},children:(0,_.kH)(e.createdAt)})]}),"image"===e.messageType?(0,R.jsx)(le._,{alt:e.message,src:e.message,onClick:()=>s.onOpen(e.message),sx:e=>({borderRadius:1.5,cursor:"pointer",transition:e.transitions.create(["opacity"]),"&:hover":{opacity:.8}})}):(0,R.jsx)(u.A,{variant:"body2",children:e.message})]})]},e.id)))}),(0,R.jsx)(Pe.Y,{index:s.selected,slides:t,open:s.open,close:s.onClose})]})}var Oe=t(62575);function Ee(){var e;const{user:n}=(0,Oe.E)();return(0,R.jsxs)(i.A,{sx:{py:3,gap:2,px:2.5,display:"flex"},children:[(0,R.jsx)(te.A,{src:null===n||void 0===n?void 0:n.photoURL,alt:null===n||void 0===n?void 0:n.displayName,children:null===n||void 0===n||null===(e=n.displayName)||void 0===e?void 0:e.charAt(0).toUpperCase()}),(0,R.jsxs)($.A,{variant:"outlined",sx:{p:1,flexGrow:1,bgcolor:"transparent"},children:[(0,R.jsx)(G.Ay,{fullWidth:!0,multiline:!0,rows:2,placeholder:"Type a message",sx:{px:1}}),(0,R.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsxs)(i.A,{sx:{flexGrow:1,display:"flex"},children:[(0,R.jsx)(B.A,{children:(0,R.jsx)(Y.W,{icon:"solar:gallery-add-bold"})}),(0,R.jsx)(B.A,{children:(0,R.jsx)(Y.W,{icon:"eva:attach-2-fill"})})]}),(0,R.jsx)(H.A,{variant:"contained",children:"Comment"})]})]})]})}var $e=t(83462),Le=t(26600),Ue=t(48734),Ge=t(35316),Ne=t(51787),_e=t(91507);const ze=64;function Ze(e){let{assignee:n=[],open:t,onClose:s}=e;const[a,o]=(0,l.useState)(""),r=(0,l.useCallback)((e=>{o(e.target.value)}),[]),d=function(e){let{inputData:n,query:t}=e;return t?n.filter((e=>{let{name:n,email:s}=e;return[n,s].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(t.toLowerCase())))})):n}({inputData:z.pr,query:a}),c=!d.length&&!!a;return(0,R.jsxs)($e.A,{fullWidth:!0,maxWidth:"xs",open:t,onClose:s,children:[(0,R.jsxs)(Le.A,{sx:{pb:0},children:["Contacts ",(0,R.jsxs)(u.A,{component:"span",children:["(",z.pr.length,")"]})]}),(0,R.jsx)(i.A,{sx:{px:3,py:2.5},children:(0,R.jsx)(fe.A,{fullWidth:!0,value:a,onChange:r,placeholder:"Search...",slotProps:{input:{startAdornment:(0,R.jsx)(Ne.A,{position:"start",children:(0,R.jsx)(Y.W,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}})}),(0,R.jsx)(Ge.A,{sx:{p:0},children:c?(0,R.jsx)(_e.c,{query:a,sx:{mt:3,mb:10}}):(0,R.jsx)(ke.Z,{sx:{height:6*ze,px:2.5},children:(0,R.jsx)(i.A,{component:"ul",children:d.map((e=>{const t=n.map((e=>e.name)).includes(e.name);return(0,R.jsxs)(i.A,{component:"li",sx:{gap:2,display:"flex",height:ze,alignItems:"center"},children:[(0,R.jsx)(te.A,{src:e.avatarUrl}),(0,R.jsx)(Ue.A,{primary:e.name,secondary:e.email}),(0,R.jsx)(H.A,{size:"small",color:t?"primary":"inherit",startIcon:(0,R.jsx)(Y.W,{width:16,icon:t?"eva:checkmark-fill":"mingcute:add-line",sx:{mr:-.5}}),children:t?"Assigned":"Assign"})]},e.id)}))})})})]})}const He=["Complete project proposal","Conduct market research","Design user interface mockups","Develop backend api","Implement authentication system"],Ve=(0,T.Ay)("span")((e=>{let{theme:n}=e;return{...n.typography.caption,width:100,flexShrink:0,color:n.vars.palette.text.secondary,fontWeight:n.typography.fontWeightSemiBold}}));function Ke(e){let{task:n,open:t,onUpdateTask:s,onDeleteTask:a,onClose:o}=e;const r=(0,S.uc)("overview"),d=(0,S.Cg)(),c=(0,S.Cg)(),[p,h]=(0,l.useState)(n.name),[m,v]=(0,l.useState)(n.priority),[g,b]=(0,l.useState)(n.description),[f,y]=(0,l.useState)(He.slice(0,2)),j=(0,Ce.Z)(pe()(n.due[0]),pe()(n.due[1])),k=(0,l.useCallback)((e=>{h(e.target.value)}),[]),A=(0,l.useCallback)((e=>{try{"Enter"===e.key&&p&&s({...n,name:p})}catch(t){console.error(t)}}),[s,n,p]),C=(0,l.useCallback)((e=>{b(e.target.value)}),[]),w=(0,l.useCallback)((e=>{v(e)}),[]);return(0,R.jsxs)(ve.Ay,{open:t,onClose:o,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:{xs:1,sm:480}}},children:[(0,R.jsx)(Se,{taskName:n.name,onDelete:a,taskStatus:n.status,liked:d.value,onCloseDetails:o,onLikeToggle:d.onToggle}),(0,R.jsx)(Ae.Q,{value:r.value,onChange:r.onChange,variant:"fullWidth",slotProps:{tab:{px:0}},children:[{value:"overview",label:"Overview"},{value:"subTasks",label:"Subtasks"},{value:"comments",label:`Comments (${n.comments.length})`}].map((e=>(0,R.jsx)(he.A,{value:e.value,label:e.label},e.value)))}),(0,R.jsxs)(ke.Z,{fillContent:!0,sx:{py:3,px:2.5},children:["overview"===r.value&&(0,R.jsxs)(i.A,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[(0,R.jsx)(J,{placeholder:"Task name",value:p,onChange:k,onKeyUp:A,inputProps:{id:`${p}-task-input`}}),(0,R.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(Ve,{children:"Reporter"}),(0,R.jsx)(te.A,{alt:n.reporter.name,src:n.reporter.avatarUrl})]}),(0,R.jsxs)(i.A,{sx:{display:"flex"},children:[(0,R.jsx)(Ve,{sx:{height:40,lineHeight:"40px"},children:"Assignee"}),(0,R.jsxs)(i.A,{sx:{gap:1,display:"flex",flexWrap:"wrap"},children:[n.assignee.map((e=>(0,R.jsx)(te.A,{alt:e.name,src:e.avatarUrl},e.id))),(0,R.jsx)(ge.A,{title:"Add assignee",children:(0,R.jsx)(B.A,{onClick:c.onTrue,sx:[e=>({border:`dashed 1px ${e.vars.palette.divider}`,bgcolor:(0,W.IG)(e.vars.palette.grey["500Channel"],.08)})],children:(0,R.jsx)(Y.W,{icon:"mingcute:add-line"})})}),(0,R.jsx)(Ze,{assignee:n.assignee,open:c.value,onClose:c.onFalse})]})]}),(0,R.jsxs)(i.A,{sx:{display:"flex"},children:[(0,R.jsx)(Ve,{sx:{height:24,lineHeight:"24px"},children:"Labels"}),!!n.labels.length&&(0,R.jsx)(i.A,{sx:{gap:1,display:"flex",flexWrap:"wrap"},children:n.labels.map((e=>(0,R.jsx)(me.A,{color:"info",label:e,size:"small",variant:"soft"},e)))})]}),(0,R.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(Ve,{children:" Due date "}),j.selected?(0,R.jsx)(H.A,{size:"small",onClick:j.onOpen,children:j.shortLabel}):(0,R.jsx)(ge.A,{title:"Add due date",children:(0,R.jsx)(B.A,{onClick:j.onOpen,sx:[e=>({border:`dashed 1px ${e.vars.palette.divider}`,bgcolor:(0,W.IG)(e.vars.palette.grey["500Channel"],.08)})],children:(0,R.jsx)(Y.W,{icon:"mingcute:add-line"})})}),(0,R.jsx)(Ce.F,{variant:"calendar",title:"Choose due date",startDate:j.startDate,endDate:j.endDate,onChangeStartDate:j.onChangeStartDate,onChangeEndDate:j.onChangeEndDate,open:j.open,onClose:j.onClose,selected:j.selected,error:j.error})]}),(0,R.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(Ve,{children:"Priority"}),(0,R.jsx)(We,{priority:m,onChangePriority:w})]}),(0,R.jsxs)(i.A,{sx:{display:"flex"},children:[(0,R.jsx)(Ve,{children:" Description "}),(0,R.jsx)(fe.A,{fullWidth:!0,multiline:!0,size:"small",minRows:4,value:g,onChange:C,slotProps:{input:{sx:{typography:"body2"}}}})]}),(0,R.jsxs)(i.A,{sx:{display:"flex"},children:[(0,R.jsx)(Ve,{children:"Attachments"}),(0,R.jsx)(Re,{attachments:n.attachments})]})]}),"subTasks"===r.value&&(0,R.jsxs)(i.A,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[(0,R.jsxs)("div",{children:[(0,R.jsxs)(u.A,{variant:"body2",sx:{mb:1},children:[f.length," of ",He.length]}),(0,R.jsx)(je.A,{variant:"determinate",value:f.length/He.length*100})]}),(0,R.jsx)(ye.A,{children:He.map((e=>(0,R.jsx)(x.A,{control:(0,R.jsx)(be.A,{disableRipple:!0,name:e,checked:f.includes(e)}),label:e,onChange:()=>(e=>{const n=f.includes(e)?f.filter((n=>n!==e)):[...f,e];y(n)})(e)},e)))}),(0,R.jsx)(H.A,{variant:"outlined",startIcon:(0,R.jsx)(Y.W,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-start"},children:"Subtask"})]}),"comments"===r.value&&!!n.comments.length&&(0,R.jsx)(Fe,{comments:n.comments})]}),"comments"===r.value&&(0,R.jsx)(Ee,{})]})}function Be(e){let{task:n,disabled:t,columnId:s,sx:a}=e;const r=(0,S.Cg)(),{setNodeRef:i,listeners:d,isDragging:c,isSorting:u,transform:x,transition:p}=(0,o.gl)({id:null===n||void 0===n?void 0:n.id}),h=function(){const[e,n]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{const e=setTimeout((()=>n(!0)),500);return()=>clearTimeout(e)}),[]),e}(),f=c&&!h,y=(0,l.useCallback)((async()=>{try{!async function(e,n){if(g){const t={columnId:e,taskId:n};await v.Ay.post(b,t,{params:{endpoint:"delete-task"}})}(0,m.k)(b,(t=>{const{board:s}=t,a={...s.tasks,[e]:s.tasks[e].filter((e=>e.id!==n))};return{...t,board:{...s,tasks:a}}}),!1)}(s,n.id),I.oR.success("Delete success!",{position:"top-center"})}catch(e){console.error(e)}}),[s,n.id]),j=(0,l.useCallback)((async e=>{try{!async function(e,n){if(g){const t={columnId:e,taskData:n};await v.Ay.post(b,t,{params:{endpoint:"update-task"}})}(0,l.startTransition)((()=>{(0,m.k)(b,(t=>{const{board:s}=t,a=s.tasks[e].map((e=>e.id===n.id?{...e,...n}:e)),l={...s.tasks,[e]:a};return{...t,board:{...s,tasks:l}}}),!1)}))}(s,e)}catch(n){console.error(n)}}),[s]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(re,{ref:t?void 0:i,task:n,open:r.value,onClick:r.onTrue,stateProps:{transform:x,listeners:d,transition:p,sorting:u,dragging:c,fadeIn:f},sx:a}),(0,R.jsx)(Ke,{task:n,open:r.value,onClose:r.onFalse,onUpdateTask:j,onDeleteTask:y})]})}function Me(e){let{sx:n,...t}=e;const[s,a]=(0,l.useState)(""),o=(0,S.Cg)(),r=(0,l.useCallback)((e=>{a(e.target.value)}),[]),d=(0,l.useCallback)((async()=>{try{!async function(e){if(g){const n={columnData:e};await v.Ay.post(b,n,{params:{endpoint:"create-column"}})}(0,m.k)(b,(n=>{const{board:t}=n,s=[...t.columns,e],a={...t.tasks,[e.id]:[]};return{...n,board:{...t,columns:s,tasks:a}}}),!1)}({id:(0,W.gZ)(),name:s.trim()?s:"Untitled"}),a(""),o.onFalse()}catch(e){console.error(e)}}),[s,o]),c=(0,l.useCallback)((e=>{"Enter"===e.key&&d()}),[d]),u=(0,l.useCallback)((()=>{a(""),o.onFalse()}),[o]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.A,{sx:[()=>({flex:"0 0 auto",width:"var(--column-width)"}),...Array.isArray(n)?n:[n]],...t,children:o.value?(0,R.jsx)(U.x,{onClickAway:u,children:(0,R.jsx)(fe.A,{autoFocus:!0,fullWidth:!0,placeholder:"Untitled",value:s,onChange:r,onKeyUp:c,helperText:"Press Enter to create the column.",sx:{[`& .${N.A.input}`]:{typography:"h6"}}})}):(0,R.jsx)(H.A,{fullWidth:!0,size:"large",color:"inherit",variant:"outlined",startIcon:(0,R.jsx)(Y.W,{icon:"mingcute:add-line",sx:{mr:-.5}}),onClick:o.onTrue,children:"Add column"})}),(0,R.jsx)(i.A,{sx:{width:"1px",flexShrink:0}})]})}var Ye=t(78185);function qe(e){let{itemCount:n=3,sx:t,...s}=e;return Array.from({length:n},((e,n)=>(0,R.jsxs)($.A,{variant:"outlined",sx:[()=>({display:"flex",gap:"var(--item-gap)",flexDirection:"column",p:"var(--column-padding)",width:"var(--column-width)",borderRadius:"var(--column-radius)"}),...Array.isArray(t)?t:[t]],...s,children:[(0,R.jsx)(Ye.A,{sx:{pt:"75%",borderRadius:1.5}}),[0].includes(n)&&(0,R.jsx)(Ye.A,{sx:{pt:"50%",borderRadius:1.5}}),[0,1].includes(n)&&(0,R.jsx)(Ye.A,{sx:{pt:"25%",borderRadius:1.5}}),[0,1,2].includes(n)&&(0,R.jsx)(Ye.A,{sx:{pt:"25%",borderRadius:1.5}})]},n)))}var Xe=t(67022);const Je={sideEffects:(0,r.WB)({styles:{active:{opacity:"0.5"}}})};function Qe(e){let{columns:n,tasks:t,activeId:s,sx:a}=e;const o=(0,l.useId)(),i=n.map((e=>e.id)),d=n.find((e=>e.id===s)),c=Object.values(t).flat().find((e=>e.id===s));return(0,R.jsx)(Xe.A,{children:(0,R.jsx)(r.Hd,{adjustScale:!1,dropAnimation:Je,children:null!=s?i.includes(s)?(0,R.jsx)(en,{column:d,tasks:t[s],sx:a},o):(0,R.jsx)(nn,{task:c,sx:a},o):null})})}function en(e){let{column:n,tasks:t,sx:s}=e;return(0,R.jsx)(F,{slots:{header:(0,R.jsx)(Q,{columnName:n.name,totalTasks:t.length}),main:t.map((e=>(0,R.jsx)(re,{task:e},e.id)))},stateProps:{dragOverlay:!0},sx:s})}function nn(e){let{task:n,sx:t}=e;return(0,R.jsx)(re,{task:n,sx:t,stateProps:{dragOverlay:!0}})}const tn="placeholder",sn={"--item-gap":"16px","--item-radius":"12px","--column-gap":"24px","--column-width":"336px","--column-radius":"16px","--column-padding":"20px 16px 16px 16px"};function an(){const{board:e,boardLoading:n,boardEmpty:t}=function(){const{data:e,isLoading:n,error:t,isValidating:s}=(0,h.Ay)(b,v.GO,f);return(0,l.useMemo)((()=>{var a,l;const o=null!==(a=null===e||void 0===e?void 0:e.board.tasks)&&void 0!==a?a:{},r=null!==(l=null===e||void 0===e?void 0:e.board.columns)&&void 0!==l?l:[];return{board:{tasks:o,columns:r},boardLoading:n,boardError:t,boardValidating:s,boardEmpty:!n&&!s&&!r.length}}),[null===e||void 0===e?void 0:e.board.columns,null===e||void 0===e?void 0:e.board.tasks,t,n,s])}(),s=(0,l.useRef)(!1),a=(0,l.useRef)(null),[k,C]=(0,l.useState)(!0),[D,S]=(0,l.useState)(null),I=e.columns.map((e=>e.id)),W=null!=D&&I.includes(D),T=(0,r.FR)((0,r.MS)(r.cA,{activationConstraint:{distance:3}}),(0,r.MS)(r.IG,{activationConstraint:{delay:250,tolerance:5}}),(0,r.MS)(r.uN,{coordinateGetter:w})),P=(0,l.useCallback)((n=>{if(D&&D in e.tasks)return(0,r.fp)({...n,droppableContainers:n.droppableContainers.filter((n=>n.id in e.tasks))});const t=(0,r.TT)(n),l=(0,r.y$)(n),o=(0,r.fp)(n),i=t.length&&o.length&&l.length?t:null;let d=(0,r.Vy)(i,"id");if(null!=d){if(d in e.tasks){const t=e.tasks[d].map((e=>e.id));var c;if(t.length>0)d=null===(c=(0,r.fp)({...n,droppableContainers:n.droppableContainers.filter((e=>e.id!==d&&t.includes(e.id)))})[0])||void 0===c?void 0:c.id}return a.current=d,[{id:d}]}return s.current&&(a.current=D),a.current?[{id:a.current}]:[]}),[D,null===e||void 0===e?void 0:e.tasks]),F=n=>n in e.tasks?n:Object.keys(e.tasks).find((t=>e.tasks[t].map((e=>e.id)).includes(n)));(0,l.useEffect)((()=>{requestAnimationFrame((()=>{s.current=!1}))}),[]);const O=e=>{let{active:n}=e;S(n.id)},E=n=>{let{active:t,over:a}=n;const l=null===a||void 0===a?void 0:a.id;if(null==l||t.id in e.tasks)return;const o=F(l),r=F(t.id);if(o&&r&&r!==o){const n=e.tasks[r].map((e=>e.id)),i=e.tasks[o].map((e=>e.id)),d=i.indexOf(l),c=n.indexOf(t.id);let u;if(l in e.tasks)u=i.length+1;else{const e=a&&t.rect.current.translated&&t.rect.current.translated.top>a.rect.top+a.rect.height;u=d>=0?d+(e?1:0):i.length+1}s.current=!0;y({...e.tasks,[r]:e.tasks[r].filter((e=>e.id!==t.id)),[o]:[...e.tasks[o].slice(0,u),e.tasks[r][c],...e.tasks[o].slice(u,e.tasks[o].length)]})}},$=n=>{let{active:t,over:s}=n;if(t.id in e.tasks&&null!==s&&void 0!==s&&s.id){const n=I.indexOf(t.id),a=I.indexOf(s.id);!async function(e){if((0,l.startTransition)((()=>{(0,m.k)(b,(n=>{const{board:t}=n;return{...n,board:{...t,columns:e}}}),!1)})),g){const n={updateColumns:e};await v.Ay.post(b,n,{params:{endpoint:"move-column"}})}}((0,o.be)(e.columns,n,a))}const a=F(t.id);if(!a)return void S(null);const r=null===s||void 0===s?void 0:s.id;if(null==r)return void S(null);const i=F(r);if(i){const n=e.tasks[a].map((e=>e.id)),s=e.tasks[i].map((e=>e.id)),l=n.indexOf(t.id),d=s.indexOf(r);if(l!==d){y({...e.tasks,[i]:(0,o.be)(e.tasks[i],l,d)})}}S(null)};return(0,R.jsxs)(p.KG,{maxWidth:!1,sx:{...sn,pb:0,pl:{sm:3},pr:{sm:0},flex:"1 1 0",display:"flex",overflow:"hidden",flexDirection:"column"},children:[(0,R.jsxs)(i.A,{sx:{pr:{sm:3},mb:{xs:3,md:5},display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,R.jsx)(u.A,{variant:"h4",children:"Kanban"}),(0,R.jsx)(x.A,{label:"Fixed column",labelPlacement:"start",control:(0,R.jsx)(c.A,{checked:k,onChange:e=>{C(e.target.checked)},inputProps:{id:"fixed-column-switch"}})})]}),n?(0,R.jsx)(i.A,{sx:{gap:"var(--column-gap)",display:"flex",alignItems:"flex-start"},children:(0,R.jsx)(qe,{})}):(0,R.jsx)(R.Fragment,{children:t?(0,R.jsx)(j.H,{filled:!0,sx:{py:10,maxHeight:{md:480}}}):(0,R.jsxs)(r.Mp,{id:"dnd-kanban",sensors:T,collisionDetection:P,measuring:{droppable:{strategy:r.Pf.Always}},onDragStart:O,onDragOver:E,onDragEnd:$,children:[(0,R.jsx)(d.A,{sx:{flex:"1 1 auto",overflowX:"auto"},children:(0,R.jsx)(d.A,{sx:{pb:3,display:"unset",...k&&{minHeight:0,display:"flex",flex:"1 1 auto"}},children:(0,R.jsx)(i.A,{sx:[e=>({display:"flex",gap:"var(--column-gap)",...k&&{minHeight:0,flex:"1 1 auto",[`& .${A.columnList}`]:{...e.mixins.hideScrollY,flex:"1 1 auto"}}})],children:(0,R.jsxs)(o.gB,{items:[...I,tn],strategy:o.m$,children:[null===e||void 0===e?void 0:e.columns.map((n=>(0,R.jsx)(ne,{column:n,tasks:e.tasks[n.id],children:(0,R.jsx)(o.gB,{items:e.tasks[n.id],strategy:o._G,children:e.tasks[n.id].map((e=>(0,R.jsx)(Be,{task:e,columnId:n.id,disabled:W},e.id)))})},n.id))),(0,R.jsx)(Me,{id:tn})]})})})}),(0,R.jsx)(Qe,{columns:null===e||void 0===e?void 0:e.columns,tasks:null===e||void 0===e?void 0:e.tasks,activeId:D,sx:sn})]})})]})}const ln={title:`Kanban | Dashboard - ${a.P.appName}`};function on(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(s.mg,{children:(0,R.jsxs)("title",{children:[" ",ln.title]})}),(0,R.jsx)(an,{})]})}}}]);
//# sourceMappingURL=4841.d570073a.chunk.js.map